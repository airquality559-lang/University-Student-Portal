<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Student Portal</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #009E60;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Login Page Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .login-box {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
            padding: 40px 30px;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header h1 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .login-header p {
            color: #666;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--secondary);
            outline: none;
        }
        
        .password-container {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #777;
        }
        
        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .btn-secondary {
            background-color: #95a5a6;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 0.9rem;
            width: auto;
        }
        
        .login-footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }
        
        .login-footer a {
            color: var(--secondary);
            text-decoration: none;
        }
        
        .login-footer a:hover {
            text-decoration: underline;
        }
        
        .role-selector {
            display: flex;
            margin-bottom: 20px;
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid #ddd;
        }
        
        .role-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            background-color: #f9f9f9;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .role-option.active {
            background-color: var(--secondary);
            color: white;
        }
        
        .role-option:not(:last-child) {
            border-right: 1px solid #ddd;
        }
        
        /* Create Account Styles */
        .create-account-container {
            display: none;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .create-account-box {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 500px;
            padding: 40px 30px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .progress-bar {
            display: flex;
            margin-bottom: 30px;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #eee;
            z-index: 1;
        }
        
        .progress-step {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 2;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 5px;
            font-weight: bold;
        }
        
        .progress-step.active .step-number {
            background-color: var(--secondary);
            color: white;
        }
        
        .step-label {
            font-size: 0.8rem;
            color: #777;
        }
        
        .progress-step.active .step-label {
            color: var(--secondary);
            font-weight: 600;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
        }
        
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .form-navigation button {
            width: 48%;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .terms-container {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .terms-container p {
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
            margin-top: 5px;
        }
        
        .checkbox-group label {
            margin-bottom: 0;
        }
        
        /* Validation styles */
        .error-message {
            color: var(--danger);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }
        
        input.error, select.error {
            border-color: var(--danger);
        }
        
        input.valid, select.valid {
            border-color: var(--success);
        }
        
        /* Success message */
        .success-message {
            text-align: center;
            padding: 20px;
        }
        
        .success-icon {
            font-size: 3rem;
            color: var(--success);
            margin-bottom: 20px;
        }
        
        /* Main Portal Styles (After Login) */
        .portal {
            display: none;
        }
        
        /* Header Styles */
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .logout-btn {
            background: none;
            border: 1px solid white;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            width: auto;
        }
        
        .logout-btn:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        /* Navigation */
        nav {
            background-color: #009E60;
            padding: 0.5rem 0;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-right: 20px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(255,255,255,0.2);
        }
        
        /* Main Content */
        main {
            padding: 2rem 0;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
        }
        
        /* Sidebar */
        .sidebar {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .sidebar h3 {
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .quick-links {
            list-style: none;
        }
        
        .quick-links li {
            margin-bottom: 10px;
        }
        
        .quick-links a {
            color: var(--dark);
            text-decoration: none;
            display: block;
            padding: 8px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .quick-links a:hover {
            background-color: var(--light);
        }
        
        /* Content Area */
        .content {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .content-header h2 {
            color: var(--primary);
        }
        
        /* Cards */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--secondary);
        }
        
        .card h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .card p {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: var(--light);
            color: var(--dark);
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Alerts */
        .alert {
            padding: 12px 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Status badges */
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .badge-success {
            background-color: var(--success);
            color: white;
        }
        
        .badge-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .badge-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .badge-info {
            background-color: var(--secondary);
            color: white;
        }
        
        /* Footer */
        footer {
            background-color: var(--primary);
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            margin-top: 2rem;
        }
        
        /* Additional Styles for Enhanced Functionality */
        .search-box {
            display: flex;
            margin-bottom: 20px;
        }
        
        .search-box input {
            flex: 1;
            margin-right: 10px;
        }
        
        .invoice-details {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .invoice-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .invoice-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #ddd;
        }
        
        .payment-methods {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .payment-method {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-method:hover {
            border-color: var(--secondary);
        }
        
        .payment-method.selected {
            border-color: var(--secondary);
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .payment-form {
            display: none;
        }
        
        .payment-form.active {
            display: block;
        }
        
        .grade-summary {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .grade-chart {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 0% 75%, var(--light) 75% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .grade-chart::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            background-color: white;
            border-radius: 50%;
        }
        
        .grade-value {
            position: relative;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .academic-progress {
            margin-top: 20px;
        }
        
        .progress-bar-container {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            border-radius: 5px;
        }
        
        .profile-section {
            margin-bottom: 30px;
        }
        
        .profile-section h3 {
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .profile-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .profile-actions button {
            width: auto;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-header h2 {
            color: var(--primary);
            margin: 0;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                flex-direction: column;
            }
            
            .nav-links li {
                margin-bottom: 10px;
            }
            
            .cards {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .payment-methods {
                flex-direction: column;
            }
            
            .grade-summary {
                flex-direction: column;
            }
            
            .grade-chart {
                margin-top: 20px;
                align-self: center;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <div class="login-header">
                <h1>University Portal</h1>
                <p>Sign in to access your account</p>
            </div>
            
            <div class="role-selector">
                <div class="role-option active" data-role="student">Student</div>
                <div class="role-option" data-role="instructor">Instructor</div>
                <div class="role-option" data-role="admin">Administrator</div>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username / Student ID</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="password-container">
                        <input type="password" id="password" placeholder="Enter your password" required>
                        <button type="button" class="toggle-password" id="togglePassword">Show</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <button type="submit">Sign In</button>
                </div>
                
                <div class="login-footer">
                    <p>Don't have an account? <a href="#" id="createAccountLink">Create one here</a></p>
                    <p><a href="#" id="forgotPassword">Forgot your password?</a></p>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Create Account Page -->
    <div class="create-account-container" id="createAccountPage">
        <div class="create-account-box">
            <div class="login-header">
                <h1>Create Student Account</h1>
                <p>Fill in your information to register</p>
            </div>
            
            <div class="progress-bar">
                <div class="progress-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Personal Info</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Academic Info</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Account Setup</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Confirmation</div>
                </div>
            </div>
            
            <form id="createAccountForm">
                <!-- Step 1: Personal Information -->
                <div class="form-step active" id="step1">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" required>
                            <div class="error-message" id="firstNameError">Please enter your first name</div>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" required>
                            <div class="error-message" id="lastNameError">Please enter your last name</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" required>
                        <div class="error-message" id="emailError">Please enter a valid email address</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone">
                        <div class="error-message" id="phoneError">Please enter a valid phone number</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" id="dob" required>
                        <div class="error-message" id="dobError">Please enter your date of birth</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" id="address" required>
                        <div class="error-message" id="addressError">Please enter your address</div>
                    </div>
                    
                    <div class="form-navigation">
                        <button type="button" class="btn-secondary" id="backToLogin">Back to Login</button>
                        <button type="button" id="nextStep1">Next</button>
                    </div>
                </div>
                
                <!-- Step 2: Academic Information -->
                <div class="form-step" id="step2">
                    <div class="form-group">
                        <label for="studentId">Student ID</label>
                        <input type="text" id="studentId" required>
                        <div class="error-message" id="studentIdError">Please enter your student ID</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="program">Program of Study</label>
                        <select id="program" required>
                            <option value="">Select a program</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Business Administration">Business Administration</option>
                            <option value="Medicine">Medicine</option>
                            <option value="Law">Law</option>
                            <option value="Arts & Humanities">Arts & Humanities</option>
                        </select>
                        <div class="error-message" id="programError">Please select your program</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="enrollmentStatus">Enrollment Status</label>
                        <select id="enrollmentStatus" required>
                            <option value="">Select status</option>
                            <option value="Full-time">Full-time</option>
                            <option value="Part-time">Part-time</option>
                        </select>
                        <div class="error-message" id="enrollmentStatusError">Please select your enrollment status</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="entryTerm">Entry Term</label>
                        <select id="entryTerm" required>
                            <option value="">Select term</option>
                            <option value="Fall 2023">Fall 2023</option>
                            <option value="Spring 2024">Spring 2024</option>
                            <option value="Fall 2024">Fall 2024</option>
                        </select>
                        <div class="error-message" id="entryTermError">Please select your entry term</div>
                    </div>
                    
                    <div class="form-navigation">
                        <button type="button" class="btn-secondary" id="prevStep2">Previous</button>
                        <button type="button" id="nextStep2">Next</button>
                    </div>
                </div>
                
                <!-- Step 3: Account Setup -->
                <div class="form-step" id="step3">
                    <div class="form-group">
                        <label for="newUsername">Username</label>
                        <input type="text" id="newUsername" required>
                        <div class="error-message" id="usernameError">Please enter a username (min. 4 characters)</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="newPassword">Password</label>
                        <div class="password-container">
                            <input type="password" id="newPassword" required>
                            <button type="button" class="toggle-password" id="toggleNewPassword">Show</button>
                        </div>
                        <div class="error-message" id="passwordError">Password must be at least 8 characters with uppercase, lowercase, and number</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <div class="password-container">
                            <input type="password" id="confirmPassword" required>
                            <button type="button" class="toggle-password" id="toggleConfirmPassword">Show</button>
                        </div>
                        <div class="error-message" id="confirmPasswordError">Passwords do not match</div>
                    </div>
                    
                    <div class="terms-container">
                        <h4>Terms and Conditions</h4>
                        <p>By creating an account, you agree to the University's Terms of Service and Privacy Policy. You understand that your academic information will be stored and processed in accordance with university policies.</p>
                        <p>You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account.</p>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="agreeTerms" required>
                        <label for="agreeTerms">I have read and agree to the Terms and Conditions</label>
                    </div>
                    <div class="error-message" id="termsError">You must agree to the terms and conditions</div>
                    
                    <div class="form-navigation">
                        <button type="button" class="btn-secondary" id="prevStep3">Previous</button>
                        <button type="button" id="nextStep3">Create Account</button>
                    </div>
                </div>
                
                <!-- Step 4: Confirmation -->
                <div class="form-step" id="step4">
                    <div class="success-message">
                        <div class="success-icon">âœ“</div>
                        <h2>Account Created Successfully!</h2>
                        <p>Your student account has been created. You can now log in to the portal using your credentials.</p>
                        <p>An email confirmation has been sent to <span id="confirmedEmail"></span> with your account details.</p>
                        
                        <div class="form-navigation" style="justify-content: center; margin-top: 30px;">
                            <button type="button" id="goToLogin">Go to Login</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Main Portal -->
    <div class="portal" id="portal">
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <h1>University Student Portal</h1>
                    </div>
                    <div class="user-info">
                        <div class="avatar" id="userAvatar">JS</div>
                        <div>
                            <div id="userName">John Smith</div>
                            <div id="userRole">Student</div>
                        </div>
                        <button class="logout-btn" id="logoutBtn">Logout</button>
                    </div>
                </div>
            </div>
        </header>
        
        <nav>
            <div class="container">
                <ul class="nav-links">
                    <li><a href="#" class="active" data-tab="dashboard">Dashboard</a></li>
                    <li><a href="#" data-tab="courses">Course Registration</a></li>
                    <li><a href="#" data-tab="grades">Grades & Records</a></li>
                    <li><a href="#" data-tab="financial">Financial Information</a></li>
                    <li><a href="#" data-tab="profile">Profile</a></li>
                </ul>
            </div>
        </nav>
        
        <main class="container">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="content-header">
                    <h2>Student Dashboard</h2>
                    <div>Fall Semester 2023</div>
                </div>
                
                <div class="cards">
                    <div class="card">
                        <h3>Enrolled Courses</h3>
                        <p id="enrolledCount">5</p>
                    </div>
                    <div class="card">
                        <h3>Current GWA</h3>
                        <p id="currentGWA">1.75</p>
                    </div>
                    <div class="card">
                        <h3>Credits Completed</h3>
                        <p id="creditsCompleted">96/120</p>
                    </div>
                    <div class="card">
                        <h3>Outstanding Balance</h3>
                        <p id="outstandingBalance">$1,250.00</p>
                    </div>
                </div>
                
                <div class="content-header">
                    <h3>Recent Notifications</h3>
                </div>
                
                <div class="alert alert-warning">
                    <strong>Registration Reminder:</strong> Course registration for Spring 2024 opens on November 15.
                </div>
                
                <div class="alert alert-success">
                    <strong>Payment Received:</strong> Your recent payment of $750 has been processed.
                </div>
                
                <div class="content-header">
                    <h3>Current Semester Courses</h3>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Course Name</th>
                            <th>Instructor</th>
                            <th>Schedule</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="currentCoursesTable">
                        <!-- Current courses will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Course Registration Tab -->
            <div id="courses" class="tab-content">
                <div class="content-header">
                    <h2>Course Registration</h2>
                    <div>Spring 2024 Semester</div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-subtab="available">Available Courses</div>
                    <div class="tab" data-subtab="enrolled">My Courses</div>
                    <div class="tab" data-subtab="waitlist">Waitlist</div>
                </div>
                
                <!-- Available Courses Subtab -->
                <div id="available" class="tab-content active">
                    <div class="search-box">
                        <input type="text" id="courseSearch" placeholder="Search courses by name, code, or instructor...">
                        <button type="button" id="searchBtn">Search</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Course Code</th>
                                <th>Course Name</th>
                                <th>Credits</th>
                                <th>Schedule</th>
                                <th>Available Seats</th>
                                <th>Prerequisites</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="availableCoursesTable">
                            <!-- Courses will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- My Courses Subtab -->
                <div id="enrolled" class="tab-content">
                    <table>
                        <thead>
                            <tr>
                                <th>Course Code</th>
                                <th>Course Name</th>
                                <th>Credits</th>
                                <th>Schedule</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="enrolledCoursesTable">
                            <!-- Enrolled courses will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Waitlist Subtab -->
                <div id="waitlist" class="tab-content">
                    <table>
                        <thead>
                            <tr>
                                <th>Course Code</th>
                                <th>Course Name</th>
                                <th>Position</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="waitlistTable">
                            <!-- Waitlist courses will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Grades & Records Tab -->
            <div id="grades" class="tab-content">
                <div class="content-header">
                    <h2>Academic Records</h2>
                    <div id="studentInfo">John Smith - Computer Science</div>
                </div>
                
                <div class="grade-summary">
                    <div>
                        <h3>Current GWA: <span id="gwaValue">1.75</span></h3>
                        <p>Academic Standing: <span class="badge badge-success" id="academicStanding">Good Standing</span></p>
                        <p>Credits Completed: <span id="creditsValue">96</span>/120</p>
                    </div>
                    <div class="grade-chart">
                        <div class="grade-value" id="gwaChart">1.75</div>
                    </div>
                </div>
                
                <div class="academic-progress">
                    <h4>Degree Progress</h4>
                    <div class="progress-bar-container">
                        <div class="progress-fill" id="progressFill" style="width: 80%"></div>
                    </div>
                    <p id="progressText">80% Complete (96 of 120 credits)</p>
                </div>
                
                <div class="content-header">
                    <h3>Transcript</h3>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Course Name</th>
                            <th>Credits</th>
                            <th>Grade</th>
                            <th>Semester</th>
                        </tr>
                    </thead>
                    <tbody id="transcriptTable">
                        <!-- Transcript data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Financial Information Tab -->
            <div id="financial" class="tab-content">
                <div class="content-header">
                    <h2>Financial Information</h2>
                    <div>Account Summary</div>
                </div>
                
                <div class="cards">
                    <div class="card">
                        <h3>Current Balance</h3>
                        <p id="currentBalance">$1,250.00</p>
                    </div>
                    <div class="card">
                        <h3>Due Date</h3>
                        <p id="dueDate">Dec 15, 2023</p>
                    </div>
                    <div class="card">
                        <h3>Last Payment</h3>
                        <p id="lastPayment">$750.00</p>
                    </div>
                    <div class="card">
                        <h3>Payment Status</h3>
                        <p id="paymentStatus">Partial</p>
                    </div>
                </div>
                
                <div class="content-header">
                    <h3>Invoice Details</h3>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>Invoice #</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Due Date</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="invoiceTable">
                        <!-- Invoice data will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <div class="content-header">
                    <h3>Payment History</h3>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Method</th>
                            <th>Reference #</th>
                        </tr>
                    </thead>
                    <tbody id="paymentHistoryTable">
                        <!-- Payment history will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Profile Tab -->
            <div id="profile" class="tab-content">
                <div class="content-header">
                    <h2>Student Profile</h2>
                </div>
                
                <div class="profile-section">
                    <h3>Personal Information</h3>
                    <form id="personalInfoForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profileFirstName">First Name</label>
                                <input type="text" id="profileFirstName" value="John">
                            </div>
                            <div class="form-group">
                                <label for="profileLastName">Last Name</label>
                                <input type="text" id="profileLastName" value="Smith">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileEmail">Email Address</label>
                            <input type="email" id="profileEmail" value="john.smith@university.edu">
                        </div>
                        
                        <div class="form-group">
                            <label for="profilePhone">Phone Number</label>
                            <input type="tel" id="profilePhone" value="(555) 123-4567">
                        </div>
                        
                        <div class="form-group">
                            <label for="profileAddress">Address</label>
                            <input type="text" id="profileAddress" value="123 University Ave, City, State 12345">
                        </div>
                        
                        <div class="profile-actions">
                            <button type="button" id="savePersonalInfo" class="btn-success">Save Changes</button>
                            <button type="button" id="cancelPersonalInfo" class="btn-secondary">Cancel</button>
                        </div>
                    </form>
                </div>
                
                <div class="profile-section">
                    <h3>Academic Information</h3>
                    <form id="academicInfoForm">
                        <div class="form-group">
                            <label for="profileStudentId">Student ID</label>
                            <input type="text" id="profileStudentId" value="S123456" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileProgram">Program of Study</label>
                            <input type="text" id="profileProgram" value="Computer Science" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileEnrollmentStatus">Enrollment Status</label>
                            <input type="text" id="profileEnrollmentStatus" value="Full-time" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileEntryTerm">Entry Term</label>
                            <input type="text" id="profileEntryTerm" value="Fall 2021" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileExpectedGraduation">Expected Graduation</label>
                            <input type="text" id="profileExpectedGraduation" value="Spring 2024" disabled>
                        </div>
                    </form>
                </div>
                
                <div class="profile-section">
                    <h3>Account Security</h3>
                    <form id="securityForm">
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <div class="password-container">
                                <input type="password" id="currentPassword">
                                <button type="button" class="toggle-password">Show</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="newProfilePassword">New Password</label>
                            <div class="password-container">
                                <input type="password" id="newProfilePassword">
                                <button type="button" class="toggle-password">Show</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmProfilePassword">Confirm New Password</label>
                            <div class="password-container">
                                <input type="password" id="confirmProfilePassword">
                                <button type="button" class="toggle-password">Show</button>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button type="button" id="updatePassword" class="btn-success">Update Password</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
        
        <footer>
            <div class="container">
                <p>University Student Portal &copy; 2023 | Secure. Reliable. Efficient.</p>
            </div>
        </footer>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Make Payment</h2>
                <button class="close-modal" id="closePaymentModal">Ã—</button>
            </div>
            
            <div class="invoice-details">
                <h4>Invoice Details</h4>
                <div class="invoice-item">
                    <span>Fall 2023 Tuition</span>
                    <span>$2,000.00</span>
                </div>
                <div class="invoice-item">
                    <span>Technology Fee</span>
                    <span>$150.00</span>
                </div>
                <div class="invoice-item">
                    <span>Student Activity Fee</span>
                    <span>$100.00</span>
                </div>
                <div class="invoice-total">
                    <span>Total Amount</span>
                    <span>$2,250.00</span>
                </div>
            </div>
            
            <div class="payment-methods">
                <div class="payment-method" data-method="credit">
                    <h4>Credit Card</h4>
                    <p>Visa, MasterCard, American Express</p>
                </div>
                <div class="payment-method" data-method="debit">
                    <h4>Debit Card</h4>
                    <p>Visa, MasterCard</p>
                </div>
                <div class="payment-method" data-method="bank">
                    <h4>Bank Transfer</h4>
                    <p>Direct from your bank account</p>
                </div>
            </div>
            
            <div class="payment-form" id="creditCardForm">
                <div class="form-group">
                    <label for="cardNumber">Card Number</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="expiryDate">Expiry Date</label>
                        <input type="text" id="expiryDate" placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" placeholder="123">
                    </div>
                </div>
                <div class="form-group">
                    <label for="cardName">Name on Card</label>
                    <input type="text" id="cardName" placeholder="John Smith">
                </div>
            </div>
            
            <div class="form-group">
                <label for="paymentAmount">Payment Amount ($)</label>
                <input type="number" id="paymentAmount" value="1250" min="1" max="2250">
            </div>
            
            <button type="button" id="submitPayment" class="btn-success">Submit Payment</button>
        </div>
    </div>

    <script>
        // User database (in a real app, this would be on the server)
        const users = {
            'S123456': { 
                username: 'S123456', 
                password: 'Student123!', 
                name: 'John Smith', 
                role: 'Student', 
                avatar: 'JS',
                email: 'john.smith@university.edu',
                phone: '(555) 123-4567',
                address: '123 University Ave, City, State 12345',
                studentId: 'S123456',
                program: 'Computer Science',
                enrollmentStatus: 'Full-time',
                entryTerm: 'Fall 2021',
                expectedGraduation: 'Spring 2024'
            },
            'I789012': { 
                username: 'I789012', 
                password: 'instructor123', 
                name: 'Dr. Elizabeth Brown', 
                role: 'Instructor', 
                avatar: 'EB' 
            },
            'A345678': { 
                username: 'A345678', 
                password: 'admin123', 
                name: 'Admin User', 
                role: 'Administrator', 
                avatar: 'AU' 
            }
        };
        
        // Course database
        const courses = {
            'CS-401': {
                code: 'CS-401',
                name: 'Advanced Algorithms',
                credits: 3,
                schedule: 'Mon/Wed 10:00-11:30',
                seats: 0,
                capacity: 25,
                prerequisites: ['CS-301'],
                instructor: 'Dr. Johnson',
                description: 'Advanced algorithm design and analysis techniques.'
            },
            'CS-405': {
                code: 'CS-405',
                name: 'Database Systems',
                credits: 3,
                schedule: 'Tue/Thu 13:00-14:30',
                seats: 0,
                capacity: 30,
                prerequisites: ['CS-201'],
                instructor: 'Prof. Davis',
                description: 'Design and implementation of database systems.'
            },
            'MATH-310': {
                code: 'MATH-310',
                name: 'Statistics for CS',
                credits: 3,
                schedule: 'Mon/Wed/Fri 09:00-10:00',
                seats: 0,
                capacity: 35,
                prerequisites: ['MATH-210'],
                instructor: 'Dr. Lee',
                description: 'Statistical methods for computer science applications.'
            },
            'CS-410': {
                code: 'CS-410',
                name: 'Machine Learning',
                credits: 3,
                schedule: 'Mon/Wed 14:00-15:30',
                seats: 12,
                capacity: 30,
                prerequisites: ['CS-301', 'MATH-210'],
                instructor: 'Dr. Wilson',
                description: 'Introduction to machine learning algorithms and applications.'
            },
            'CS-415': {
                code: 'CS-415',
                name: 'Web Development',
                credits: 3,
                schedule: 'Tue/Thu 10:00-11:30',
                seats: 0,
                capacity: 25,
                prerequisites: ['CS-201'],
                instructor: 'Prof. Davis',
                description: 'Modern web development techniques and frameworks.'
            },
            'CS-420': {
                code: 'CS-420',
                name: 'Cybersecurity',
                credits: 3,
                schedule: 'Mon/Wed 16:00-17:30',
                seats: 8,
                capacity: 25,
                prerequisites: ['CS-302'],
                instructor: 'Dr. Roberts',
                description: 'Fundamentals of cybersecurity and network protection.'
            },
            'CS-425': {
                code: 'CS-425',
                name: 'Software Engineering',
                credits: 3,
                schedule: 'Tue/Thu 14:00-15:30',
                seats: 15,
                capacity: 30,
                prerequisites: ['CS-301'],
                instructor: 'Prof. Anderson',
                description: 'Software development methodologies and project management.'
            },
            'MATH-320': {
                code: 'MATH-320',
                name: 'Advanced Calculus',
                credits: 4,
                schedule: 'Mon/Wed/Fri 11:00-12:00',
                seats: 20,
                capacity: 35,
                prerequisites: ['MATH-220'],
                instructor: 'Dr. Lee',
                description: 'Advanced topics in calculus and mathematical analysis.'
            }
        };
        
        // Student data
        let studentData = {
            enrolledCourses: ['CS-401', 'CS-405', 'MATH-310'],
            waitlist: ['CS-415'],
            transcript: [
                { code: 'CS-401', name: 'Advanced Algorithms', credits: 3, grade: 'A-', semester: 'Fall 2023' },
                { code: 'CS-405', name: 'Database Systems', credits: 3, grade: 'B+', semester: 'Fall 2023' },
                { code: 'MATH-310', name: 'Statistics for CS', credits: 3, grade: 'A', semester: 'Fall 2023' },
                { code: 'CS-301', name: 'Data Structures', credits: 3, grade: 'A', semester: 'Spring 2023' },
                { code: 'CS-302', name: 'Computer Networks', credits: 3, grade: 'B+', semester: 'Spring 2023' },
                { code: 'MATH-210', name: 'Discrete Mathematics', credits: 3, grade: 'A-', semester: 'Spring 2023' },
                { code: 'CS-201', name: 'Programming Fundamentals', credits: 3, grade: 'A', semester: 'Fall 2022' },
                { code: 'CS-202', name: 'Object-Oriented Programming', credits: 3, grade: 'A-', semester: 'Fall 2022' },
                { code: 'MATH-220', name: 'Calculus I', credits: 4, grade: 'B+', semester: 'Fall 2022' }
            ],
            invoices: [
                { id: 'INV-2023-FALL', description: 'Fall 2023 Tuition', amount: 2000, dueDate: '2023-12-15', status: 'partial', paid: 750 },
                { id: 'INV-2023-SUMMER', description: 'Summer 2023 Tuition', amount: 1500, dueDate: '2023-08-01', status: 'paid', paid: 1500 },
                { id: 'INV-2023-SPRING', description: 'Spring 2023 Tuition', amount: 2000, dueDate: '2023-05-01', status: 'paid', paid: 2000 }
            ],
            paymentHistory: [
                { date: '2023-11-10', description: 'Fall 2023 Tuition - Partial', amount: 750, method: 'Credit Card', reference: 'PAY-789012' },
                { date: '2023-07-15', description: 'Summer 2023 Tuition', amount: 1500, method: 'Bank Transfer', reference: 'PAY-654321' },
                { date: '2023-04-05', description: 'Spring 2023 Tuition', amount: 2000, method: 'Credit Card', reference: 'PAY-321098' },
                { date: '2023-01-10', description: 'Spring 2023 Tuition - Partial', amount: 1000, method: 'Credit Card', reference: 'PAY-112233' }
            ]
        };
        
        // DOM Elements
        const loginPage = document.getElementById('loginPage');
        const createAccountPage = document.getElementById('createAccountPage');
        const portal = document.getElementById('portal');
        const loginForm = document.getElementById('loginForm');
        const createAccountForm = document.getElementById('createAccountForm');
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');
        const roleOptions = document.querySelectorAll('.role-option');
        const logoutBtn = document.getElementById('logoutBtn');
        const userName = document.getElementById('userName');
        const userRole = document.getElementById('userRole');
        const userAvatar = document.getElementById('userAvatar');
        const forgotPassword = document.getElementById('forgotPassword');
        const createAccountLink = document.getElementById('createAccountLink');
        const backToLogin = document.getElementById('backToLogin');
        const goToLogin = document.getElementById('goToLogin');
        
        // Form steps and navigation
        const formSteps = document.querySelectorAll('.form-step');
        const progressSteps = document.querySelectorAll('.progress-step');
        let currentStep = 1;
        
        // Current user
        let currentUser = null;
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set up login functionality
            setupLogin();
            
            // Set up account creation functionality
            setupAccountCreation();
            
            // Set up portal navigation
            setupPortalNavigation();
        });
        
        // Set up login functionality
        function setupLogin() {
            // Role selection
            roleOptions.forEach(option => {
                option.addEventListener('click', function() {
                    roleOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Toggle password visibility
            togglePassword.addEventListener('click', function() {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    togglePassword.textContent = 'Hide';
                } else {
                    passwordInput.type = 'password';
                    togglePassword.textContent = 'Show';
                }
            });
            
            // Login form submission
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const selectedRole = document.querySelector('.role-option.active').getAttribute('data-role');
                
                // Check credentials
                if (users[username] && users[username].password === password && users[username].role.toLowerCase() === selectedRole) {
                    // Successful login
                    currentUser = users[username];
                    showPortal();
                } else {
                    // Failed login
                    alert('Invalid username or password. Please try again.');
                }
            });
            
            // Show create account form
            createAccountLink.addEventListener('click', function(e) {
                e.preventDefault();
                loginPage.style.display = 'none';
                createAccountPage.style.display = 'flex';
            });
            
            // Forgot password
            forgotPassword.addEventListener('click', function(e) {
                e.preventDefault();
                alert('Password reset instructions have been sent to your registered email.');
            });
        }
        
        // Set up account creation functionality
        function setupAccountCreation() {
            // Back to login from create account
            backToLogin.addEventListener('click', function() {
                createAccountPage.style.display = 'none';
                loginPage.style.display = 'flex';
                resetCreateAccountForm();
            });
            
            // Go to login after account creation
            goToLogin.addEventListener('click', function() {
                createAccountPage.style.display = 'none';
                loginPage.style.display = 'flex';
                resetCreateAccountForm();
            });
            
            // Toggle new password visibility
            document.getElementById('toggleNewPassword').addEventListener('click', function() {
                const passwordField = document.getElementById('newPassword');
                if (passwordField.type === 'password') {
                    passwordField.type = 'text';
                    this.textContent = 'Hide';
                } else {
                    passwordField.type = 'password';
                    this.textContent = 'Show';
                }
            });
            
            // Toggle confirm password visibility
            document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
                const passwordField = document.getElementById('confirmPassword');
                if (passwordField.type === 'password') {
                    passwordField.type = 'text';
                    this.textContent = 'Hide';
                } else {
                    passwordField.type = 'password';
                    this.textContent = 'Show';
                }
            });
            
            // Form navigation
            document.getElementById('nextStep1').addEventListener('click', function() {
                if (validateStep1()) {
                    showStep(2);
                }
            });
            
            document.getElementById('prevStep2').addEventListener('click', function() {
                showStep(1);
            });
            
            document.getElementById('nextStep2').addEventListener('click', function() {
                if (validateStep2()) {
                    showStep(3);
                }
            });
            
            document.getElementById('prevStep3').addEventListener('click', function() {
                showStep(2);
            });
            
            document.getElementById('nextStep3').addEventListener('click', function() {
                if (validateStep3()) {
                    createStudentAccount();
                    showStep(4);
                }
            });
        }
        
        // Show specific step in form
        function showStep(stepNumber) {
            // Hide all steps
            formSteps.forEach(step => {
                step.classList.remove('active');
            });
            
            // Remove active class from all progress steps
            progressSteps.forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(`step${stepNumber}`).classList.add('active');
            
            // Activate current progress step
            document.querySelector(`.progress-step[data-step="${stepNumber}"]`).classList.add('active');
            
            currentStep = stepNumber;
        }
        
        // Validation functions
        function validateStep1() {
            let isValid = true;
            
            // First name validation
            const firstName = document.getElementById('firstName');
            if (!firstName.value.trim()) {
                showError('firstNameError', 'Please enter your first name');
                firstName.classList.add('error');
                isValid = false;
            } else {
                hideError('firstNameError');
                firstName.classList.remove('error');
                firstName.classList.add('valid');
            }
            
            // Last name validation
            const lastName = document.getElementById('lastName');
            if (!lastName.value.trim()) {
                showError('lastNameError', 'Please enter your last name');
                lastName.classList.add('error');
                isValid = false;
            } else {
                hideError('lastNameError');
                lastName.classList.remove('error');
                lastName.classList.add('valid');
            }
            
            // Email validation
            const email = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email.value.trim() || !emailRegex.test(email.value)) {
                showError('emailError', 'Please enter a valid email address');
                email.classList.add('error');
                isValid = false;
            } else {
                hideError('emailError');
                email.classList.remove('error');
                email.classList.add('valid');
            }
            
            // Date of birth validation
            const dob = document.getElementById('dob');
            if (!dob.value) {
                showError('dobError', 'Please enter your date of birth');
                dob.classList.add('error');
                isValid = false;
            } else {
                hideError('dobError');
                dob.classList.remove('error');
                dob.classList.add('valid');
            }
            
            return isValid;
        }
        
        function validateStep2() {
            let isValid = true;
            
            // Student ID validation
            const studentId = document.getElementById('studentId');
            if (!studentId.value.trim()) {
                showError('studentIdError', 'Please enter your student ID');
                studentId.classList.add('error');
                isValid = false;
            } else {
                hideError('studentIdError');
                studentId.classList.remove('error');
                studentId.classList.add('valid');
            }
            
            // Program validation
            const program = document.getElementById('program');
            if (!program.value) {
                showError('programError', 'Please select your program');
                program.classList.add('error');
                isValid = false;
            } else {
                hideError('programError');
                program.classList.remove('error');
                program.classList.add('valid');
            }
            
            // Enrollment status validation
            const enrollmentStatus = document.getElementById('enrollmentStatus');
            if (!enrollmentStatus.value) {
                showError('enrollmentStatusError', 'Please select your enrollment status');
                enrollmentStatus.classList.add('error');
                isValid = false;
            } else {
                hideError('enrollmentStatusError');
                enrollmentStatus.classList.remove('error');
                enrollmentStatus.classList.add('valid');
            }
            
            return isValid;
        }
        
        function validateStep3() {
            let isValid = true;
            
            // Username validation
            const username = document.getElementById('newUsername');
            if (!username.value.trim() || username.value.length < 4) {
                showError('usernameError', 'Username must be at least 4 characters');
                username.classList.add('error');
                isValid = false;
            } else if (users[username.value]) {
                showError('usernameError', 'Username already exists');
                username.classList.add('error');
                isValid = false;
            } else {
                hideError('usernameError');
                username.classList.remove('error');
                username.classList.add('valid');
            }
            
            // Password validation
            const password = document.getElementById('newPassword');
            const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
            if (!password.value || !passwordRegex.test(password.value)) {
                showError('passwordError', 'Password must be at least 8 characters with uppercase, lowercase, and number');
                password.classList.add('error');
                isValid = false;
            } else {
                hideError('passwordError');
                password.classList.remove('error');
                password.classList.add('valid');
            }
            
            // Confirm password validation
            const confirmPassword = document.getElementById('confirmPassword');
            if (password.value !== confirmPassword.value) {
                showError('confirmPasswordError', 'Passwords do not match');
                confirmPassword.classList.add('error');
                isValid = false;
            } else {
                hideError('confirmPasswordError');
                confirmPassword.classList.remove('error');
                confirmPassword.classList.add('valid');
            }
            
            // Terms agreement validation
            const agreeTerms = document.getElementById('agreeTerms');
            if (!agreeTerms.checked) {
                showError('termsError', 'You must agree to the terms and conditions');
                isValid = false;
            } else {
                hideError('termsError');
            }
            
            return isValid;
        }
        
        function showError(errorId, message) {
            const errorElement = document.getElementById(errorId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        function hideError(errorId) {
            const errorElement = document.getElementById(errorId);
            errorElement.style.display = 'none';
        }
        
        // Create student account
        function createStudentAccount() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            const studentId = document.getElementById('studentId').value;
            const program = document.getElementById('program').value;
            const enrollmentStatus = document.getElementById('enrollmentStatus').value;
            const entryTerm = document.getElementById('entryTerm').value;
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newPassword').value;
            
            // In a real application, this would be sent to a server
            // For demo purposes, we'll store it in our users object
            users[username] = {
                username: username,
                password: password,
                name: `${firstName} ${lastName}`,
                role: 'Student',
                avatar: `${firstName.charAt(0)}${lastName.charAt(0)}`,
                email: email,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                studentId: studentId,
                program: program,
                enrollmentStatus: enrollmentStatus,
                entryTerm: entryTerm,
                expectedGraduation: calculateExpectedGraduation(entryTerm)
            };
            
            // Update confirmation message
            document.getElementById('confirmedEmail').textContent = email;
            
            console.log('New student account created:', users[username]);
        }
        
        // Calculate expected graduation based on entry term
        function calculateExpectedGraduation(entryTerm) {
            const termMap = {
                'Fall 2023': 'Spring 2027',
                'Spring 2024': 'Spring 2028',
                'Fall 2024': 'Spring 2028'
            };
            return termMap[entryTerm] || 'Spring 2028';
        }
        
        // Reset create account form
        function resetCreateAccountForm() {
            createAccountForm.reset();
            showStep(1);
            
            // Remove validation classes
            const inputs = createAccountForm.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.classList.remove('error', 'valid');
            });
            
            // Hide error messages
            const errorMessages = createAccountForm.querySelectorAll('.error-message');
            errorMessages.forEach(error => {
                error.style.display = 'none';
            });
        }
        
        // Show portal after successful login
        function showPortal() {
            loginPage.style.display = 'none';
            createAccountPage.style.display = 'none';
            portal.style.display = 'block';
            
            // Update user info in portal
            userName.textContent = currentUser.name;
            userRole.textContent = currentUser.role;
            userAvatar.textContent = currentUser.avatar;
            
            // Initialize portal functionality
            initializePortal();
        }
        
        // Initialize portal functionality
        function initializePortal() {
            // Update dashboard
            updateDashboard();
            
            // Initialize course registration
            initializeCourseRegistration();
            
            // Initialize grades and records
            initializeGradesAndRecords();
            
            // Initialize financial information
            initializeFinancialInformation();
            
            // Initialize profile
            initializeProfile();
        }
        
        // Update dashboard
        function updateDashboard() {
            // Update enrolled courses count
            document.getElementById('enrolledCount').textContent = studentData.enrolledCourses.length;
            
            // Update current courses table
            const currentCoursesTable = document.getElementById('currentCoursesTable');
            currentCoursesTable.innerHTML = '';
            
            studentData.enrolledCourses.forEach(code => {
                const course = courses[code];
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>${course.instructor}</td>
                    <td>${course.schedule}</td>
                    <td><span class="badge badge-success">Enrolled</span></td>
                `;
                
                currentCoursesTable.appendChild(row);
            });
        }
        
        // Initialize Course Registration functionality
        function initializeCourseRegistration() {
            // Populate available courses table
            populateAvailableCourses();
            
            // Populate enrolled courses table
            populateEnrolledCourses();
            
            // Populate waitlist table
            populateWaitlist();
            
            // Add search functionality
            document.getElementById('searchBtn').addEventListener('click', searchCourses);
            document.getElementById('courseSearch').addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    searchCourses();
                }
            });
        }
        
        // Populate available courses table
        function populateAvailableCourses() {
            const tableBody = document.getElementById('availableCoursesTable');
            tableBody.innerHTML = '';
            
            for (const code in courses) {
                const course = courses[code];
                const row = document.createElement('tr');
                
                // Check if student is already enrolled or on waitlist
                const isEnrolled = studentData.enrolledCourses.includes(code);
                const isWaitlisted = studentData.waitlist.includes(code);
                
                row.innerHTML = `
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>${course.credits}</td>
                    <td>${course.schedule}</td>
                    <td>${course.seats}/${course.capacity}</td>
                    <td>${course.prerequisites.join(', ')}</td>
                    <td>
                        ${isEnrolled ? 
                            '<span class="badge badge-success">Enrolled</span>' : 
                            isWaitlisted ? 
                            '<span class="badge badge-warning">Waitlisted</span>' :
                            course.seats > 0 ? 
                            `<button class="btn-success btn-small" data-course="${code}">Register</button>` :
                            `<button class="btn-warning btn-small" data-course="${code}">Waitlist</button>`
                        }
                    </td>
                `;
                
                tableBody.appendChild(row);
            }
            
            // Add event listeners to register/waitlist buttons
            document.querySelectorAll('#availableCoursesTable .btn-success, #availableCoursesTable .btn-warning').forEach(button => {
                button.addEventListener('click', function() {
                    const courseCode = this.getAttribute('data-course');
                    const course = courses[courseCode];
                    
                    if (this.classList.contains('btn-success')) {
                        registerForCourse(courseCode);
                    } else {
                        addToWaitlist(courseCode);
                    }
                });
            });
        }
        
        // Populate enrolled courses table
        function populateEnrolledCourses() {
            const tableBody = document.getElementById('enrolledCoursesTable');
            tableBody.innerHTML = '';
            
            studentData.enrolledCourses.forEach(code => {
                const course = courses[code];
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>${course.credits}</td>
                    <td>${course.schedule}</td>
                    <td><span class="badge badge-success">Enrolled</span></td>
                    <td><button class="btn-danger btn-small" data-course="${code}">Drop</button></td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Add event listeners to drop buttons
            document.querySelectorAll('#enrolledCoursesTable .btn-danger').forEach(button => {
                button.addEventListener('click', function() {
                    const courseCode = this.getAttribute('data-course');
                    dropCourse(courseCode);
                });
            });
        }
        
        // Populate waitlist table
        function populateWaitlist() {
            const tableBody = document.getElementById('waitlistTable');
            tableBody.innerHTML = '';
            
            studentData.waitlist.forEach((code, index) => {
                const course = courses[code];
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>${index + 1}</td>
                    <td><button class="btn-danger btn-small" data-course="${code}">Remove</button></td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Add event listeners to remove buttons
            document.querySelectorAll('#waitlistTable .btn-danger').forEach(button => {
                button.addEventListener('click', function() {
                    const courseCode = this.getAttribute('data-course');
                    removeFromWaitlist(courseCode);
                });
            });
        }
        
        // Search courses
        function searchCourses() {
            const searchTerm = document.getElementById('courseSearch').value.toLowerCase();
            const tableBody = document.getElementById('availableCoursesTable');
            const rows = tableBody.getElementsByTagName('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                let found = false;
                
                for (let j = 0; j < cells.length; j++) {
                    if (cells[j].textContent.toLowerCase().includes(searchTerm)) {
                        found = true;
                        break;
                    }
                }
                
                rows[i].style.display = found ? '' : 'none';
            }
        }
        
        // Register for a course
        function registerForCourse(courseCode) {
            const course = courses[courseCode];
            
            if (course.seats > 0) {
                studentData.enrolledCourses.push(courseCode);
                course.seats--;
                
                // Remove from waitlist if applicable
                const waitlistIndex = studentData.waitlist.indexOf(courseCode);
                if (waitlistIndex !== -1) {
                    studentData.waitlist.splice(waitlistIndex, 1);
                }
                
                // Update tables
                populateAvailableCourses();
                populateEnrolledCourses();
                populateWaitlist();
                updateDashboard();
                
                alert(`Successfully registered for ${course.code} - ${course.name}`);
            } else {
                alert(`No seats available for ${course.code}. Adding to waitlist.`);
                addToWaitlist(courseCode);
            }
        }
        
        // Add to waitlist
        function addToWaitlist(courseCode) {
            if (!studentData.waitlist.includes(courseCode)) {
                studentData.waitlist.push(courseCode);
                populateAvailableCourses();
                populateWaitlist();
                alert(`Added to waitlist for ${courseCode}`);
            } else {
                alert(`You are already on the waitlist for ${courseCode}`);
            }
        }
        
        // Drop a course
        function dropCourse(courseCode) {
            if (confirm(`Are you sure you want to drop ${courseCode}?`)) {
                const index = studentData.enrolledCourses.indexOf(courseCode);
                if (index !== -1) {
                    studentData.enrolledCourses.splice(index, 1);
                    courses[courseCode].seats++;
                    
                    // Update tables
                    populateAvailableCourses();
                    populateEnrolledCourses();
                    updateDashboard();
                    
                    alert(`Successfully dropped ${courseCode}`);
                }
            }
        }
        
        // Remove from waitlist
        function removeFromWaitlist(courseCode) {
            if (confirm(`Are you sure you want to remove yourself from the waitlist for ${courseCode}?`)) {
                const index = studentData.waitlist.indexOf(courseCode);
                if (index !== -1) {
                    studentData.waitlist.splice(index, 1);
                    populateWaitlist();
                    populateAvailableCourses();
                    
                    alert(`Removed from waitlist for ${courseCode}`);
                }
            }
        }
        
        // Initialize Grades and Records functionality
        function initializeGradesAndRecords() {
            // Populate transcript table
            populateTranscript();
            
            // Update student info
            document.getElementById('studentInfo').textContent = `${currentUser.name} - ${currentUser.program}`;
            
            // Calculate and display GWA
            calculateAndDisplayGWA();
        }
        
        // Populate transcript table
        function populateTranscript() {
            const tableBody = document.getElementById('transcriptTable');
            tableBody.innerHTML = '';
            
            studentData.transcript.forEach(course => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>${course.credits}</td>
                    <td>${course.grade}</td>
                    <td>${course.semester}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Calculate and display GWA
        function calculateAndDisplayGWA() {
            // Calculate total credits and quality points
            let totalCredits = 0;
            let totalQualityPoints = 0;
            
            studentData.transcript.forEach(course => {
                const gradePoints = getGradePoints(course.grade);
                totalQualityPoints += gradePoints * course.credits;
                totalCredits += course.credits;
            });
            
            // Calculate GWA
            const gwa = totalQualityPoints / totalCredits;
            const formattedGWA = gwa.toFixed(2);
            
            // Update GWA display
            document.getElementById('gwaValue').textContent = formattedGWA;
            document.getElementById('gwaChart').textContent = formattedGWA;
            
            // Update academic standing
            const academicStanding = getAcademicStanding(gwa);
            document.getElementById('academicStanding').textContent = academicStanding;
            
            // Update credits completed
            document.getElementById('creditsValue').textContent = totalCredits;
            
            // Update progress
            const progressPercentage = (totalCredits / 120) * 100;
            document.getElementById('progressFill').style.width = `${progressPercentage}%`;
            document.getElementById('progressText').textContent = `${Math.round(progressPercentage)}% Complete (${totalCredits} of 120 credits)`;
        }
        
        // Convert letter grade to grade points
        function getGradePoints(grade) {
            const gradeMap = {
                'A': 4.0,
                'A-': 3.7,
                'B+': 3.3,
                'B': 3.0,
                'B-': 2.7,
                'C+': 2.3,
                'C': 2.0,
                'C-': 1.7,
                'D+': 1.3,
                'D': 1.0,
                'F': 0.0
            };
            return gradeMap[grade] || 0.0;
        }
        
        // Determine academic standing based on GWA
        function getAcademicStanding(gwa) {
            if (gwa >= 3.5) return 'Dean\'s List';
            if (gwa >= 2.0) return 'Good Standing';
            if (gwa >= 1.5) return 'Academic Probation';
            return 'Academic Dismissal';
        }
        
        // Initialize Financial Information functionality
        function initializeFinancialInformation() {
            // Populate invoice table
            populateInvoices();
            
            // Populate payment history table
            populatePaymentHistory();
            
            // Update financial summary
            updateFinancialSummary();
            
            // Set up payment modal
            setupPaymentModal();
        }
        
        // Populate invoice table
        function populateInvoices() {
            const tableBody = document.getElementById('invoiceTable');
            tableBody.innerHTML = '';
            
            studentData.invoices.forEach(invoice => {
                const row = document.createElement('tr');
                const statusBadge = invoice.status === 'paid' ? 
                    '<span class="badge badge-success">Paid</span>' : 
                    invoice.status === 'partial' ? 
                    '<span class="badge badge-warning">Partial</span>' : 
                    '<span class="badge badge-danger">Due</span>';
                
                const actionButton = invoice.status === 'paid' ? 
                    '<button class="btn-secondary btn-small" disabled>View Receipt</button>' : 
                    `<button class="btn-success btn-small" data-invoice="${invoice.id}">Make Payment</button>`;
                
                row.innerHTML = `
                    <td>${invoice.id}</td>
                    <td>${invoice.description}</td>
                    <td>$${invoice.amount.toFixed(2)}</td>
                    <td>${formatDate(invoice.dueDate)}</td>
                    <td>${statusBadge}</td>
                    <td>${actionButton}</td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Add event listeners to payment buttons
            document.querySelectorAll('#invoiceTable .btn-success').forEach(button => {
                button.addEventListener('click', function() {
                    const invoiceId = this.getAttribute('data-invoice');
                    openPaymentModal(invoiceId);
                });
            });
        }
        
        // Populate payment history table
        function populatePaymentHistory() {
            const tableBody = document.getElementById('paymentHistoryTable');
            tableBody.innerHTML = '';
            
            studentData.paymentHistory.forEach(payment => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${formatDate(payment.date)}</td>
                    <td>${payment.description}</td>
                    <td>$${payment.amount.toFixed(2)}</td>
                    <td>${payment.method}</td>
                    <td>${payment.reference}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Update financial summary
        function updateFinancialSummary() {
            // Calculate current balance
            let currentBalance = 0;
            studentData.invoices.forEach(invoice => {
                if (invoice.status !== 'paid') {
                    currentBalance += invoice.amount - invoice.paid;
                }
            });
            
            // Update financial summary cards
            document.getElementById('currentBalance').textContent = `$${currentBalance.toFixed(2)}`;
            
            // Find next due date
            const upcomingInvoices = studentData.invoices.filter(invoice => invoice.status !== 'paid');
            if (upcomingInvoices.length > 0) {
                const nextDueDate = upcomingInvoices.reduce((earliest, invoice) => {
                    return new Date(invoice.dueDate) < new Date(earliest.dueDate) ? invoice : earliest;
                });
                document.getElementById('dueDate').textContent = formatDate(nextDueDate.dueDate);
            }
            
            // Update last payment
            if (studentData.paymentHistory.length > 0) {
                const lastPayment = studentData.paymentHistory[0];
                document.getElementById('lastPayment').textContent = `$${lastPayment.amount.toFixed(2)}`;
            }
            
            // Update payment status
            const hasOutstandingBalance = currentBalance > 0;
            const hasPartialPayments = studentData.invoices.some(invoice => invoice.status === 'partial');
            
            if (!hasOutstandingBalance) {
                document.getElementById('paymentStatus').textContent = 'Paid';
            } else if (hasPartialPayments) {
                document.getElementById('paymentStatus').textContent = 'Partial';
            } else {
                document.getElementById('paymentStatus').textContent = 'Due';
            }
        }
        
        // Set up payment modal
        function setupPaymentModal() {
            const modal = document.getElementById('paymentModal');
            const closeBtn = document.getElementById('closePaymentModal');
            const paymentMethods = document.querySelectorAll('.payment-method');
            const submitBtn = document.getElementById('submitPayment');
            
            // Close modal
            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Select payment method
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    paymentMethods.forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Show corresponding payment form
                    const methodType = this.getAttribute('data-method');
                    document.querySelectorAll('.payment-form').forEach(form => {
                        form.classList.remove('active');
                    });
                    
                    // In a real app, we would show different forms for different payment methods
                    // For this demo, we'll just show the credit card form for all methods
                    document.getElementById('creditCardForm').classList.add('active');
                });
            });
            
            // Submit payment
            submitBtn.addEventListener('click', function() {
                const amount = parseFloat(document.getElementById('paymentAmount').value);
                const selectedMethod = document.querySelector('.payment-method.selected');
                
                if (!selectedMethod) {
                    alert('Please select a payment method');
                    return;
                }
                
                if (isNaN(amount) || amount <= 0) {
                    alert('Please enter a valid payment amount');
                    return;
                }
                
                // Process payment (in a real app, this would connect to a payment gateway)
                processPayment(amount, selectedMethod.getAttribute('data-method'));
            });
        }
        
        // Open payment modal
        function openPaymentModal(invoiceId) {
            const modal = document.getElementById('paymentModal');
            const invoice = studentData.invoices.find(inv => inv.id === invoiceId);
            
            if (invoice) {
                // Set payment amount to remaining balance
                const remaining = invoice.amount - invoice.paid;
                document.getElementById('paymentAmount').value = remaining;
                
                // Show modal
                modal.style.display = 'flex';
            }
        }
        
        // Process payment
        function processPayment(amount, method) {
            // In a real application, this would connect to a payment gateway
            // For demo purposes, we'll simulate a successful payment
            
            // Find the current invoice
            const invoice = studentData.invoices.find(inv => inv.status !== 'paid');
            
            if (invoice) {
                // Update invoice status
                invoice.paid += amount;
                
                if (invoice.paid >= invoice.amount) {
                    invoice.status = 'paid';
                } else {
                    invoice.status = 'partial';
                }
                
                // Add to payment history
                const now = new Date();
                const paymentDate = now.toISOString().split('T')[0];
                const reference = 'PAY-' + Math.floor(100000 + Math.random() * 900000);
                
                studentData.paymentHistory.unshift({
                    date: paymentDate,
                    description: `${invoice.description} - Payment`,
                    amount: amount,
                    method: method.charAt(0).toUpperCase() + method.slice(1) + ' Card',
                    reference: reference
                });
                
                // Update tables and summary
                populateInvoices();
                populatePaymentHistory();
                updateFinancialSummary();
                updateDashboard();
                
                // Close modal
                document.getElementById('paymentModal').style.display = 'none';
                
                // Reset form
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                document.getElementById('creditCardForm').classList.remove('active');
                document.getElementById('cardNumber').value = '';
                document.getElementById('expiryDate').value = '';
                document.getElementById('cvv').value = '';
                document.getElementById('cardName').value = '';
                
                alert(`Payment of $${amount.toFixed(2)} processed successfully. Reference: ${reference}`);
            }
        }
        
        // Initialize Profile functionality
        function initializeProfile() {
            // Populate profile form with user data
            populateProfileForm();
            
            // Set up profile form event listeners
            setupProfileForm();
        }
        
        // Populate profile form with user data
        function populateProfileForm() {
            document.getElementById('profileFirstName').value = currentUser.name.split(' ')[0];
            document.getElementById('profileLastName').value = currentUser.name.split(' ')[1];
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profilePhone').value = currentUser.phone;
            document.getElementById('profileAddress').value = currentUser.address;
            document.getElementById('profileStudentId').value = currentUser.studentId;
            document.getElementById('profileProgram').value = currentUser.program;
            document.getElementById('profileEnrollmentStatus').value = currentUser.enrollmentStatus;
            document.getElementById('profileEntryTerm').value = currentUser.entryTerm;
            document.getElementById('profileExpectedGraduation').value = currentUser.expectedGraduation;
        }
        
        // Set up profile form event listeners
        function setupProfileForm() {
            // Save personal info
            document.getElementById('savePersonalInfo').addEventListener('click', function() {
                const firstName = document.getElementById('profileFirstName').value;
                const lastName = document.getElementById('profileLastName').value;
                const email = document.getElementById('profileEmail').value;
                const phone = document.getElementById('profilePhone').value;
                const address = document.getElementById('profileAddress').value;
                
                // Update user data
                currentUser.name = `${firstName} ${lastName}`;
                currentUser.email = email;
                currentUser.phone = phone;
                currentUser.address = address;
                
                // Update displayed user info
                userName.textContent = currentUser.name;
                userAvatar.textContent = `${firstName.charAt(0)}${lastName.charAt(0)}`;
                
                alert('Personal information updated successfully');
            });
            
            // Cancel personal info changes
            document.getElementById('cancelPersonalInfo').addEventListener('click', function() {
                populateProfileForm();
            });
            
            // Update password
            document.getElementById('updatePassword').addEventListener('click', function() {
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newProfilePassword').value;
                const confirmPassword = document.getElementById('confirmProfilePassword').value;
                
                if (!currentPassword) {
                    alert('Please enter your current password');
                    return;
                }
                
                if (currentPassword !== currentUser.password) {
                    alert('Current password is incorrect');
                    return;
                }
                
                if (!newPassword) {
                    alert('Please enter a new password');
                    return;
                }
                
                // Check password strength
                const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
                if (!passwordRegex.test(newPassword)) {
                    alert('Password must be at least 8 characters with uppercase, lowercase, and number');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    alert('New passwords do not match');
                    return;
                }
                
                // Update password
                currentUser.password = newPassword;
                
                // Clear password fields
                document.getElementById('currentPassword').value = '';
                document.getElementById('newProfilePassword').value = '';
                document.getElementById('confirmProfilePassword').value = '';
                
                alert('Password updated successfully');
            });
            
            // Add toggle password functionality to profile form
            document.querySelectorAll('#profile .toggle-password').forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input');
                    if (input.type === 'password') {
                        input.type = 'text';
                        this.textContent = 'Hide';
                    } else {
                        input.type = 'password';
                        this.textContent = 'Show';
                    }
                });
            });
        }
        
        // Set up portal navigation
        function setupPortalNavigation() {
            // Tab navigation
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.nav-links a').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Sub-tab navigation for course registration
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const subtabId = this.getAttribute('data-subtab');
                    
                    // Remove active class from all subtabs and contents
                    document.querySelectorAll('.tab').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked subtab
                    this.classList.add('active');
                    
                    // Show corresponding content
                    document.getElementById(subtabId).classList.add('active');
                });
            });
            
            // Logout functionality
            logoutBtn.addEventListener('click', function() {
                currentUser = null;
                portal.style.display = 'none';
                loginPage.style.display = 'flex';
                loginForm.reset();
            });
        }
        
        // Helper function to format dates
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
    </script>
</body>
</html>